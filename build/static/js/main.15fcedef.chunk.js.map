{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","services/persons.js","components/Message.js","App.js","index.js"],"names":["Filter","props","value","nameFilter","onChange","handle","PersonForm","onSubmit","addPerson","newName","handleNameChange","newNumber","handleNumberChange","type","Person","person","name","number","onClick","handleDeleteClick","Persons","persons","map","key","id","baseUrl","axios","get","then","response","data","newObject","Math","floor","random","post","put","delete","Message","message","className","text","App","useState","setPersons","setNewName","setNewNumber","setNewNameFilter","setMessage","useEffect","personService","updatePerson","personToUpdate","find","toLowerCase","e","newMessage","setTimeout","catch","error","deletePerson","updatedPersons","filter","p","personsToShow","console","log","includes","event","target","preventDefault","some","window","confirm","personObject","concat","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.15fcedef.chunk.js","sourcesContent":["import React from 'react'\n\nconst Filter = (props) => {\n    return (\n        <div>\n            filter shown with: <input value={props.nameFilter} \n            onChange={props.handle} />\n        </div>\n    )\n}\n\nexport default Filter","import React from 'react'\n\nconst PersonForm = (props) => {\n    return (\n        <form onSubmit={props.addPerson}>\n        <div>\n          name: <input value={props.newName} \n          onChange={props.handleNameChange} />\n        </div>\n        <div>\n          number: <input value={props.newNumber} \n          onChange={props.handleNumberChange} />\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n    )\n}\n\nexport default PersonForm","import React from 'react'\n\nconst Person = (props) => {\n    return (\n        <li>{props.person.name} {props.person.number} \n        <button onClick={() => \n            props.handleDeleteClick(props.person)   }>\n                delete\n          </button>\n        </li>\n    )\n}\n\nexport default Person\n","import React from 'react'\nimport Person from './Person'\n\nconst Persons = (props) => {\n    return (\n        <ul>\n            {props.persons.map((person) => \n                <Person \n                key={person.id}\n                person={person}\n                handleDeleteClick={props.handleDeleteClick} />\n            )}\n        </ul>\n    )\n}\n\nexport default Persons","import axios from 'axios'\nconst baseUrl = '/api/persons'\n\nconst getAll = () => {\n    const request = axios.get(baseUrl)\n    return request.then(response => response.data)\n  }\n  \n  const create = newObject => {\n    newObject.id = Math.floor(Math.random()*1000000)+1\n    const request = axios.post(baseUrl, newObject)\n    return request.then(response => response.data)\n  }\n\n  const deletePerson = id => {\n    return axios.delete(`${baseUrl}/${id}`)\n  }\n\nconst update = (id, newObject) => {\n    const request = axios.put(`${baseUrl}/${id}`, newObject)\n    return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, deletePerson }","import React from 'react'\n\nconst Message = ({ message }) => {\n    if (message === null) {\n      return null\n    } else {\n        if (message.type === 'success') {\n            return (\n                <div className=\"message success\">\n                  {message.text}\n                </div>\n              )\n        } else if (message.type === 'error') {\n            return (\n                <div className=\"message error\">\n                  {message.text}\n                </div>\n              )\n        } else {\n            return null\n        }\n    }  \n  }\n\n  export default Message","import React, { useState, useEffect } from 'react'\nimport Filter from './components/Filter'\nimport PersonForm from './components/PersonForm.js'\nimport Persons from './components/Persons'\nimport personService from './services/persons'\nimport Message from './components/Message'\n\nconst App = () => {\n  const [ persons, setPersons] = useState([])\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber ] = useState('')\n  const [ nameFilter, setNewNameFilter ] = useState('')\n  const [ message, setMessage] = useState(null)\n\n  useEffect(() => {\n    personService\n      .getAll()\n      .then(response => {\n        setPersons(response)\n      })\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    if (persons.some(e => e.name.toLowerCase() === newName.toLowerCase())) {\n      if (window.confirm(`${newName} is already added, replace the number?`)) {\n        updatePerson()\n      } else {\n        const newMessage = {\n          type: `message`,\n          text: `No change`\n        }\n        setMessage(newMessage)\n        setTimeout(() => { setMessage(null) }, 4000)\n      }\n    } else {\n        const personObject = {\n          name: newName,\n          number: newNumber\n        }\n        personService\n        .create(personObject)\n        .then(response => {\n          setPersons(persons.concat(response))\n        })\n        const newMessage = {\n          type: `success`,\n          text: `${personObject.name} has been added`\n        }\n        setMessage(newMessage)\n        setTimeout(() => { setMessage(null) }, 4000)\n        setNewName('')\n        setNewNumber('')\n        setNewNameFilter('')\n      } \n  }\n\n  const updatePerson = () => {\n    const personToUpdate = persons.find(person => person.name.toLowerCase() === newName.toLowerCase())\n        personToUpdate.number = newNumber\n        personService.update(personToUpdate.id, personToUpdate)\n        .then(response => {\n          setPersons(persons.map(person => person.id !== personToUpdate.id ? person : response))\n         }).then(e => {\n          const newMessage = {\n            type: `success`,\n            text: `Updated the number of ${personToUpdate.name}`\n          }\n          setMessage(newMessage)\n          setTimeout(() => { setMessage(null) }, 4000)\n        }).catch(error => {\n          const newMessage = {\n            type: `error`,\n            text: `${personToUpdate.name} has already been removed from the server!`\n          }\n          setMessage(newMessage)\n          setTimeout(() => { setMessage(null) }, 4000)\n        })\n        setNewName('')\n        setNewNumber('')\n  }\n\n  const handleDeleteClick = (person) => {\n    console.log('deleting', person.id);\n    const name = person.name\n    if (window.confirm(`Delete ${name}?`)) {\n    deletePerson(person)\n    }\n  }\n\n  const deletePerson = (person) => {\n    personService.deletePerson(person.id)\n      .then(response => {\n        const updatedPersons = persons.filter(p => p.id !== person.id)\n        setPersons(updatedPersons)\n      }).then(e => {\n        const newMessage = {\n          type: `success`,\n          text: `Deleted ${person.name}`\n        }\n        setMessage(newMessage)\n        setTimeout(() => { setMessage(null) }, 4000)\n      }).catch(error => {\n        const newMessage = {\n          type: `error`,\n          text: `${person.name} has already been removed from the server!`\n        }\n        setMessage(newMessage)\n        setTimeout(() => { setMessage(null) }, 4000)\n      })\n  }\n\n  const handleNameChange = (event) => {\n    setNewName(event.target.value)\n  }\n\n  const handleNumberChange = (event) => {\n    setNewNumber(event.target.value)\n  }\n\n  const handleNameFilterChange = (event) => {\n    setNewNameFilter(event.target.value)\n  }\n\n  const personsToShow = persons.filter(\n    (person) => {\n      console.log('pe', person);\n      \n    return person.name.toLowerCase().includes(nameFilter.toLowerCase())\n    }\n    )\n\n  return (\n    <div>\n      <h1>Phonebook</h1>\n        <Message message={message} />\n        <Filter nameFilter={nameFilter} handle={handleNameFilterChange}/>\n      \n      <h2>Add a new</h2>\n\n      <PersonForm \n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        addPerson={addPerson}\n      />\n\n      <h2>Numbers</h2>\n\n      <Persons \n      persons={personsToShow}\n      handleDeleteClick={handleDeleteClick}/>\n\n    </div>\n  )\n\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}